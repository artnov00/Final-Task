<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Nexus Gaming - Produtos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <a href="index.html" class="logo">G4 NEXUS</a>
        <nav>
            <a href="index.html">InÃ­cio</a>
            <a href="produtos.html" class="active">Produtos</a>
            <a href="suporte.html">Suporte</a>
        </nav>
        <div style="display: flex; gap: 10px; align-items: center;">
            <div id="area-usuario"></div>
            <a href="carrinho.html" style="text-decoration:none; color:white;">
                ðŸ›’ <span id="contador-carrinho" style="background: red; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
            </a>
        </div>
    </header>

    <div class="container">
        <h2>CatÃ¡logo Completo</h2>
        
        <div style="text-align: center; margin-bottom: 20px;">
            <button onclick="carregarProdutos('todos')" class="botao-verde">Todos</button>
            <button onclick="carregarProdutos('Hardware')" class="botao-verde" style="background:#333; color:white;">Hardware</button>
            <button onclick="carregarProdutos('Game')" class="botao-verde" style="background:#333; color:white;">Games</button>
        </div>

        <div id="lista-produtos" class="grade-produtos">
            <p>Carregando produtos...</p>
        </div>
    </div>

    <script src="global.js"></script>
    <script>
        async function carregarProdutos(filtro) {
            try {
                const res = await fetch(`${API_URL}/produtos`);
                const produtos = await res.json();
                const container = document.getElementById('lista-produtos');
                container.innerHTML = '';

                produtos.forEach(p => {
                    if (filtro === 'todos' || p.categoria.toLowerCase() === filtro.toLowerCase()) {
                        container.innerHTML += `
                            <div class="cartao-produto">
                                <img src="${p.imagemUrl || 'https://via.placeholder.com/150'}" alt="${p.nome}">
                                <h3>${p.nome}</h3>
                                <p class="preco">R$ ${p.preco.toFixed(2)}</p>
                                <button onclick='adicionarAoCarrinho(${JSON.stringify(p)})' class="botao-verde">Adicionar</button>
                            </div>
                        `;
                    }
                });
            } catch (e) {
                container.innerHTML = '<p>Erro ao conectar com servidor (Spring Boot).</p>';
            }
        }
        // Inicia carregando todos
        carregarProdutos('todos');
    </script>
</body>
</html>