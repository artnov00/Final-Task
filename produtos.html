<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Nexus Gaming - Produtos</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <a href="index.html" class="logo">G4 NEXUS</a>
        <nav>
            <a href="index.html">In√≠cio</a>
            <a href="produtos.html" class="active">Produtos</a>
            <a href="suporte.html">Suporte</a>
        </nav>
        <div style="display: flex; gap: 10px; align-items: center;">
            <div id="area-usuario"></div>
            <a href="carrinho.html" style="text-decoration:none; color:white;">
                üõí <span id="contador-carrinho" style="background: red; border-radius: 50%; padding: 2px 6px; font-size: 12px;">0</span>
            </a>
        </div>
    </header>

    <!-- ... (HTML anterior igual) ... -->

<div class="container">
    <h2>Cat√°logo Completo</h2>
    
    <!-- Bot√µes de filtro -->
    <div style="text-align: center; margin-bottom: 20px;">
        <button onclick="carregarProdutos('todos')" class="botao-verde">Todos</button>
        <button onclick="carregarProdutos('Hardware')" class="botao-verde" style="background:#333; color:white;">Hardware</button>
        <button onclick="carregarProdutos('Game')" class="botao-verde" style="background:#333; color:white;">Games</button>
    </div>

    <!-- Onde os produtos v√£o aparecer (ID importante: lista-produtos) -->
    <div id="lista-produtos" class="grade-produtos">
        <p>Carregando produtos...</p>
    </div>
</div>

<script src="global.js"></script>
<script>
    async function carregarProdutos(filtro) {
        // 1. Define onde vamos colocar os produtos
        const container = document.getElementById('lista-produtos');
        
        // Limpa e mostra carregando
        container.innerHTML = '<p>Carregando...</p>';

        try {
            // 2. Busca os dados no Render
            const res = await fetch(`${API_URL}/produtos`);
            
            if (!res.ok) {
                throw new Error(`Erro na API: ${res.status}`);
            }

            const produtos = await res.json();
            
            // 3. Limpa a mensagem de carregando
            container.innerHTML = '';

            // 4. Desenha cada produto
            produtos.forEach(p => {
                // Filtro (se for 'todos' ou bater a categoria)
                if (filtro === 'todos' || p.categoria.toLowerCase() === filtro.toLowerCase()) {
                    container.innerHTML += `
                        <div class="cartao-produto">
                            <img src="${p.imagemUrl || 'https://via.placeholder.com/150'}" alt="${p.nome}">
                            <h3>${p.nome}</h3>
                            <p class="preco">R$ ${p.preco.toFixed(2)}</p>
                            <button onclick='adicionarAoCarrinho(${JSON.stringify(p)})' class="botao-verde">Adicionar</button>
                        </div>
                    `;
                }
            });

            // Se n√£o tiver produtos no filtro
            if (container.innerHTML === '') {
                container.innerHTML = '<p>Nenhum produto encontrado nesta categoria.</p>';
            }

        } catch (e) {
            console.error(e);
            container.innerHTML = '<p style="color:red">Erro ao carregar produtos. O servidor pode estar dormindo (Render demora 50s para acordar).</p>';
        }
    }

    // Carrega tudo ao abrir a p√°gina
    carregarProdutos('todos');
</script>
</body>
</html>
